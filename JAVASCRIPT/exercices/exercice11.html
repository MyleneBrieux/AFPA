<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8"/>
        
    <title>Exercice 11</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" 
          integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

</head>

<body>

    <table class="table table-success table-bordered" style="text-align: center;">
        <tr>
            <td>Cellule 1</td>
            <td>Cellule 2</td>
            <td>Cellule 3</td>
            <td>Cellule 4</td>
            <td>Cellule 5</td>
        </tr>
    </table>

    <script src="jquery-3.5.1.min.js"></script>

    <script> 
    /* Ecrire un tableau Html avec des cellules (td) éditables (transformées en input) au clic. 
       Une fois la saisie terminée l’input disparait et la valeur et maintenue. */

        var tds=document.getElementsByTagName("td"); // on récupère tous les td //

            for (let i=0; i<tds.length; i++) { // on les parcourt //
                const td = tds[i]; // on garde un td parmi tous les autres //
                
                td.addEventListener('click', function (event){ // on crée un événement sur le td cliqué //
                    const tdContent = td.innerHTML;
                    td.innerHTML = "";
                    const input = document.createElement("input");  // on crée un input //
                    input.type = "text"; // attributions //
                    input.value = tdContent;
                    const target = event.target; // on fait bien l'événement sur ce td //
                    target.appendChild(input); // on place bien le input sur ce td //
                    input.focus();

                        input.addEventListener('focusout', function (event) { // on transmet la valeur de l'input au td //
                            const targetInput = event.target;
                            const inputContent = targetInput.value;
                            targetInput.parentElement.innerHTML = inputContent;
                        });

                        input.addEventListener('click', function(event){
                            e.stopPropagation();
                        });

                })

            }

        // $("td").html("Blabla");
        
    </script>


</body>

</html>